@using Kendo.Mvc.UI
@using KendoDP2.Areas.Organizacion.Models
@using KendoDP2.Areas.Configuracion.Models
@{
    ViewBag.Title = "Organizacion";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{Html.RenderPartial("Titulo", new KendoDP2.Models.Helpers.PageTitle("Organizacion", "Administre los datos de la empresa"));}

@model KendoDP2.Areas.Organizacion.Models.OrganizacionDTO
@{
    IList<TipoDocumentoDTO> tipoDocumentos = ViewBag.tipoDocumentos;
    IList<PaisDTO> pais = ViewBag.pais;
    IList<ColaboradorDTO> colaboradores = ViewBag.colaboradores;
}

@{/*@using (Html.BeginForm("UpdateOrganizacion", "Organizaciones", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    */}
 <div class="portlet box green">
    <div class="portlet-title">
        <h4><i class="icon-reorder"></i>Organización</h4>
        <div class="tools">
	        <a href="javascript:;" class="collapse"></a>
        </div>
	</div>   

    <div class="portlet-body">
        <div class="row-fluid">
           
                <!-- contenedor superior izquierdo: campos -->
            @Html.Label("Datos Generales:", new { style = "font-weight: bold;" })

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.RazonSocial)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                           @Html.TextBox("_RazonSocial", Model.RazonSocial)
                         
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Ruc)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Ruc", Model.Ruc)
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Rubro)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Rubro", Model.Rubro)
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Direccion)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Direccion", Model.Direccion)
                        </div>
                    </div>
                </div>


                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Telefono)</div>
                    </div>
                    <div class="span4">
                         <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Telefono", Model.Telefono)
                        </div>    
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.PaisID)</div>
                    </div>
                    <div class="span4 responsive">
                        @Html.DropDownListFor(p => p.PaisID, new SelectList(pais, "ID", "Nombre"), new { style = "width:100%", id = "_PaisID" })
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Ciudad)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Ciudad", Model.Ciudad)
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.CorreoElectronico)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_CorreoElectronico", Model.CorreoElectronico)
                        </div>
                    </div>
                </div>


                @Html.Label("Misión y Visión:", new { style = "font-weight: bold;" })


                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Mision)</div>
                    </div>
                    <div class="span5">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Mision", Model.Mision)
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.Vision)</div>
                    </div>
                    <div class="span5">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.TextBox("_Vision", Model.Vision)
                        </div>
                    </div>
                </div>
                         
             @Html.Label("Datos Representante:", new { style = "font-weight: bold;" })

                <div class="row-fluid">
                    <div class="span3">
                        <div class="editor-label" style="width: 100%; text-align: left;">@Html.LabelFor(model => model.ColaboradorID)</div>
                    </div>
                    <div class="span4">
                        <div class="editor-field" style="width: 100%; text-align: left;">
                            @Html.DropDownListFor(c => c.ColaboradorID, new SelectList(colaboradores, "ID", "NombreCompleto"), new { style = "width:100%", @onchange="cargaDatosRepresentante();", id = "_ColaboradorID" })
                        </div>
                    </div>
                </div>
             <div id = "datos-representante"></div>
           
            <div class="row-fluid">
            <button id="edicion" class="btn green pull-left">
                Editar <i class="m-icon-swapright m-icon-white"></i>
            </button>
            </div>
        </div>
   </div>
    
    </div>
    
<div id="modalprueba" title="Editar organización" style = "display:none;"><div id="modal-content"></div></div>
<style>
    .ui-dialog .ui-dialog-content 
    { 
        border: 0; 
        padding: .5em 1em; 
        background: none; 
        overflow: auto; 
        zoom: 1;
        background-color: #ffd;
        border: solid 1px #ea7;             
    }

    .ui-dialog .ui-dialog-titlebar 
    { 
        display:none;   
    }

    .ui-widget-content
    {
        border:none;
    }
</style>  

<script type="text/javascript">
    $(document).ready(function () {
        cargaDatosRepresentante();
        $("#modalprueba").load("@Url.Action("CargaModal","Organizaciones",new{Area="Organizacion"})?orgID=" + 1);
    });

    function cargaDatosRepresentante() {
        var dropdown = $("#_ColaboradorID");
        var ID = dropdown.find('option:selected').attr('value');
        $("#datos-representante").load("@Url.Action("CargaDatosRepresentante", "Organizaciones", new {Area = "Organizacion"})?colaboradorID=" + ID);
    }

    $("#edicion").click(function () {

       
        $("#modalprueba").dialog({
            modal: true,
            width: '800px'
        });

    });

    function cierraModal() {
        $("#modalprueba").dialog("close");
    }

</script>